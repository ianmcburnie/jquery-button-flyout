
(function($,window,document,undefined){$.fn.buttonFlyout=function buttonFlyout(options){options=$.extend({focusManagement:false,sticky:false,isLiveRegion:false},options);return this.each(function onEach(){var $this=$(this);var $button=$this.find('.flyout__button, > button, > a[role=button]');var $overlay=$this.find('.flyout__overlay, > *:last-child');var isAnchorTag=($button.prop('tagName').toLowerCase()==='a');function openButtonFlyout(e){if($button.attr('aria-expanded')==='false'){$button.attr('aria-expanded','true');$overlay.attr('aria-hidden','false');if(options.focusManagement===true){$overlay.focusable().first().focus();}
$this.trigger('buttonFlyoutOpen');}}
function closeButtonFlyout(e){if($button.attr('aria-expanded')==='true'){$button.attr('aria-expanded','false');$overlay.attr('aria-hidden','true');$this.trigger('buttonFlyoutClose');}}
$this.nextId('button-flyout');if(options.isLiveRegion===true){$this.attr('aria-live','polite');}
if(options.sticky===false){$overlay.focusExit().on('focusExit',closeButtonFlyout);$this.focusExit().on('focusExit',closeButtonFlyout);}
$overlay.prop('id',$this.prop('id')+'-overlay').attr('aria-hidden','true');$button.attr('aria-controls',$overlay.prop('id')).attr('aria-expanded','false');$button.on('click',function onButtonClick(e){if(isAnchorTag===true){e.preventDefault();}
if($overlay.attr('aria-hidden')==='true'){openButtonFlyout();}else{closeButtonFlyout();}});if(isAnchorTag===true){$button.commonKeyDown().on('spaceKeyDown',function(){$button.click();});}
$overlay.commonKeyDown().on('escapeKeyDown',function onEscKeyDown(e){$button.focus();});});};}(jQuery,window,document));